var CustomSelect=function($){$.fn.customSelect=function(options){$(this).each(function(){function createOptionsArray(){optionsArray=[],$.each($selectOptions,function(i,option){var el=$(option).text().trim();optionsArray.push(el)})}function hideDropdown(){$dropdown.slideUp(defaults.transition,function(){$customSelect.removeClass(customSelectActiveModifier).removeClass(customSelectDropupModifier),"function"==typeof defaults.hideCallback&&defaults.hideCallback.call($customSelect[0])}),$(window).off("click touchstart",outsideClickHandler).off("resize",toggleDropupModifier),$customSelectValue.off("click"),setDropdownToggle(),defaults.keyboard&&($dropdownOptions.blur(),$(window).off("keydown",keyboardHandler)),defaults.autocomplete&&($dropdownOptions.show(),$input.val(""),$optionWrap.scrollTop(0))}function setDropdownToggle(){$customSelectValue.one("click",function(event){event.preventDefault(),$customSelect.addClass(customSelectActiveModifier),toggleDropupModifier(),$(window).on("resize",toggleDropupModifier),$dropdown.slideDown(defaults.transition,function(){"function"==typeof defaults.showCallback&&defaults.showCallback.call($customSelect[0])}),$(window).on("ontouchstart"in document.documentElement?"touchstart":"click",outsideClickHandler),$customSelectValue.one("click",function(event){event.preventDefault(),hideDropdown()}),defaults.keyboard&&(defaults.index=-1,$(window).on("keydown",keyboardHandler))})}function toggleDropupModifier(){var bottom=$customSelect[0].getBoundingClientRect().bottom;$customSelect.toggleClass(customSelectDropupModifier,$(window).height()-bottom<$dropdown.height())}function outsideClickHandler(event){var $target=$(event.target);$target.parents().is($customSelect)||$target.is($customSelect)||hideDropdown()}function keyboardHandler(event){var visibleOptions=dropdownOptions+":visible";switch(event.keyCode){case 40:event.preventDefault(),0!==$dropdown.find(visibleOptions).eq(defaults.index+1).length?defaults.index+=1:defaults.index=0,$dropdown.find(visibleOptions).eq(defaults.index).focus();break;case 38:event.preventDefault(),0!==$dropdown.find(visibleOptions).eq(defaults.index-1).length&&defaults.index-1>=0?defaults.index-=1:defaults.index=$dropdown.find(visibleOptions).length-1,$dropdown.find(visibleOptions).eq(defaults.index).focus();break;case 13:case 32:$input&&$input.is(":focus")||(event.preventDefault(),$(dropdownOptions+":focus").trigger("click"),$select.trigger("change"),$customSelectValue.focus());break;case 27:event.preventDefault(),hideDropdown(),$customSelectValue.focus()}}var $select=$(this),optionsArray=[],defaults={autocomplete:!1,autocompletePlaceholder:!1,block:"custom-select",hideCallback:!1,includeValue:!1,keyboard:!0,modifier:!1,placeholder:!1,showCallback:!1,transition:100};"object"==typeof options&&$.extend(defaults,options),$select.hide().after('<div class="'+defaults.block+'">\n             <button class="'+defaults.block+"__option "+defaults.block+'__option--value"></button>\n             <div class="'+defaults.block+'__dropdown"></div>\n           </div>');var $selectOptions=$select.find("option"),customSelect="."+defaults.block,customSelectActiveModifier=defaults.block+"--active",customSelectDropupModifier=defaults.block+"--dropup",dropdownOptionHtml='<button class="'+defaults.block+'__option"></button>',dropdownOptions=customSelect+"__option",$customSelect=$select.next(customSelect),$customSelectValue=$customSelect.find(customSelect+"__option--value"),$dropdown=$customSelect.find(customSelect+"__dropdown");defaults.modifier&&$customSelect.addClass(defaults.modifier),createOptionsArray(),$dropdown.html("").hide();var $input=null;defaults.autocomplete&&($input=$('<input class="'+defaults.block+'__input">'),defaults.autocompletePlaceholder&&$input.attr("placeholder",defaults.autocompletePlaceholder),$dropdown.append($input)),$select.find("[selected]").length&&(defaults.placeholder=!1),$.each(optionsArray,function(i,el){var cssClass=$selectOptions.eq(i).attr("class"),$currentOption=$(dropdownOptionHtml).text(el).addClass(cssClass);el===$select.find(":selected").text().trim()?(defaults.placeholder?($customSelectValue.html(defaults.placeholder),$select.prop("selectedIndex",-1)):$customSelectValue.text(el),$customSelectValue.addClass(cssClass).data("class",cssClass),(defaults.includeValue||defaults.placeholder)&&$dropdown.append($currentOption)):$dropdown.append($currentOption)}),setDropdownToggle();var $dropdownOptions=$dropdown.find(dropdownOptions),$optionWrap=null;defaults.autocomplete&&($dropdownOptions.wrapAll('<div class="'+defaults.block+'__option-wrap"></div>'),$optionWrap=$dropdown.find(customSelect+"__option-wrap")),$dropdownOptions.on("click",function(event){event.preventDefault();var choice=$(this).text().trim();$customSelectValue.text(choice).removeClass($customSelectValue.data("class")),$selectOptions.prop("selected",!1),$.each(optionsArray,function(i,el){defaults.includeValue||el!==choice||optionsArray.splice(i,1),$.each($selectOptions,function(i,option){var $option=$(option);if($option.text().trim()===choice){var cssClass=$option.attr("class");$option.prop("selected",!0),$customSelectValue.addClass(cssClass).data("class",cssClass)}})}),hideDropdown(),defaults.includeValue||($dropdownOptions.length>optionsArray.length-1&&$dropdownOptions.eq(optionsArray.length).remove(),$.each($dropdownOptions,function(i,option){var $option=$(option);$option.text(optionsArray[i]),$option.attr("class",defaults.block+"__option"),$.each($selectOptions,function(){var $this=$(this);$this.text().trim()===optionsArray[i]&&$option.addClass($this.attr("class"))})})),createOptionsArray(),void 0!==event.originalEvent&&$select.trigger("change")}),defaults.autocomplete&&($input.on("focus",function(){defaults.index=-1,$optionWrap.scrollTop(0)}),$input.on("keyup",function(){var query=$input.val().trim();query.length?setTimeout(function(){query===$input.val().trim()&&$.each($dropdownOptions,function(i,option){var $option=$(option),match=-1!==$option.text().trim().toLowerCase().indexOf(query.toLowerCase());$option.toggle(match)})},300):$dropdownOptions.show()}))})}}($);
//# sourceMappingURL=jquery.custom-select.min.js.map