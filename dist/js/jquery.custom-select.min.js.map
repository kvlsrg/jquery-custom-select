{"version":3,"sources":["../../jquery.custom-select.js"],"names":["CustomSelect","$","defaults","block","hideCallback","includeValue","keyboard","modifier","placeholder","search","showCallback","transition","select","options","this","_$select","_options","_extends","_activeModifier","_dropupModifier","_optionSelectedModifier","_keydown","bind","_dropup","_outside","_init","_proto","prototype","reset","_$dropdown","hide","empty","_$value","off","_fill","_$element","after","addClass","find","_this","_$values","_values","each","i","option","el","text","trim","push","length","html","prop","cssClass","eq","attr","$option","$selected","removeClass","data","removeData","toggleClass","is","append","_$options","_search","one","event","_show","on","_select","_this2","preventDefault","window","slideDown","_$input","focus","_scroll","call","setTimeout","document","_hide","index","_this3","val","blur","show","_$wrap","scrollTop","slideUp","_this4","top","position","center","outerHeight","_this5","choice","currentTarget","values","concat","splice","last","remove","not","$this","originalEvent","trigger","_this6","prepend","wrapAll","query","match","toLowerCase","indexOf","toggle","bottom","getBoundingClientRect","up","height","$target","target","parents","$visible","filter","which","add","_jQueryPlugin","config","fn","noConflict"],"mappings":"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","sourcesContent":["import $ from 'jquery';\r\n\r\n/*!\r\n * Custom Select jQuery Plugin\r\n */\r\n\r\nconst CustomSelect = (($) => {\r\n\r\n  const defaults = {\r\n    block: 'custom-select',\r\n    hideCallback: false,\r\n    includeValue: false,\r\n    keyboard: true,\r\n    modifier: false,\r\n    placeholder: false,\r\n    search: false,\r\n    showCallback: false,\r\n    transition: 0\r\n  };\r\n\r\n  class CustomSelect {\r\n\r\n    /**\r\n     * Custom Select\r\n     *\r\n     * @param {Element} select Original `<select>` DOM element to customize.\r\n     * @param {(Object|string)=} options Settings object or method name.\r\n     * @param {string=} options.block Custom select BEM block name.\r\n     * @param {Function=} options.hideCallback Fires after dropdown closes.\r\n     * @param {boolean=} options.includeValue Adds chosen value option to\r\n     *     dropdown. If enabled also cancels dropdown options rerender.\r\n     * @param {boolean=} options.keyboard Enables keyboard control.\r\n     * @param {string=} options.modifier Custom select block BEM modifier.\r\n     * @param {string=} options.placeholder Placeholder hint, can be an HTML\r\n     *     string (appears only if there is no explicitly selected options).\r\n     * @param {boolean=} options.search Adds input to filter options.\r\n     * @param {Function=} options.showCallback Fires after dropdown opens.\r\n     * @param {(number|string)=} options.transition jQuery slideUp/Down param.\r\n     */\r\n    constructor(select, options) {\r\n      this._$select = $(select);\r\n      this._options = {\r\n        ...defaults,\r\n        ...typeof options === 'object' ? options : {}\r\n      };\r\n\r\n      // Modifiers\r\n      this._activeModifier = `${this._options.block}--active`;\r\n      this._dropupModifier = `${this._options.block}--dropup`;\r\n      this._optionSelectedModifier = `${this._options.block}__option--selected`;\r\n\r\n      // Event handlers that can be removed\r\n      this._keydown = this._keydown.bind(this);\r\n      this._dropup = this._dropup.bind(this);\r\n      this._outside = this._outside.bind(this);\r\n\r\n      this._init();\r\n    }\r\n\r\n    /**\r\n     * Resets custom select options.\r\n     *\r\n     * @public\r\n     */\r\n    reset() {\r\n      this._$dropdown.hide().empty();\r\n      this._$value.off('click');\r\n\r\n      this._fill();\r\n    }\r\n\r\n    /**\r\n     * Renders initial state of custom select & sets\r\n     * options click event listeners.\r\n     *\r\n     * @private\r\n     */\r\n    _init() {\r\n      this._$element = $(\r\n        `<div class=\"${this._options.block}\">\r\n           <button class=\"${this._options.block}__option ${this._options.block}__option--value\" type=\"button\"></button>\r\n           <div class=\"${this._options.block}__dropdown\" style=\"display: none;\"></div>\r\n         </div>`\r\n      );\r\n\r\n      this._$select\r\n        .hide()\r\n        .after(this._$element);\r\n\r\n      if (this._options.modifier) {\r\n        this._$element.addClass(this._options.modifier);\r\n      }\r\n\r\n      this._$value = this._$element.find(`.${this._options.block}__option--value`);\r\n      this._$dropdown = this._$element.find(`.${this._options.block}__dropdown`);\r\n\r\n      this._fill();\r\n    }\r\n\r\n    /**\r\n     * Renders custom select options by original\r\n     * select element options.\r\n     *\r\n     * @private\r\n     */\r\n    _fill() {\r\n      this._$values = this._$select.find('option');\r\n      this._values = [];\r\n\r\n      let placeholder = this._options.placeholder;\r\n\r\n      $.each(this._$values, (i, option) => {\r\n        const el = $(option).text().trim();\r\n        this._values.push(el);\r\n      });\r\n\r\n      if (placeholder) {\r\n        // Check explicitly selected option\r\n        if (this._$select.find('[selected]').length) {\r\n          placeholder = false;\r\n        } else {\r\n          this._$value.html(placeholder);\r\n          // Set select value to null\r\n          this._$select.prop('selectedIndex', -1);\r\n        }\r\n      }\r\n\r\n      $.each(this._values, (i, el) => {\r\n        const cssClass = this._$values.eq(i).attr('class');\r\n        const $option = $(\r\n          `<button class=\"${this._options.block}__option\" type=\"button\">${el}</button>`\r\n        );\r\n        const $selected = this._$select.find(':selected');\r\n\r\n        if (this._$values.eq(i).attr('disabled')) {\r\n          $option.prop('disabled', true);\r\n        }\r\n\r\n        if ((!$selected.length && i === 0) || el === $selected.text().trim()) {\r\n          if (!placeholder) {\r\n            this._$value\r\n              .text(el)\r\n              .removeClass(this._$value.data('class')).removeData('class')\r\n              .addClass(cssClass).data('class', cssClass);\r\n          }\r\n\r\n          if (this._options.includeValue || placeholder) {\r\n            $option.addClass(cssClass);\r\n            $option.toggleClass(this._optionSelectedModifier, this._$values.eq(i).is('[selected]'));\r\n            this._$dropdown.append($option);\r\n          }\r\n        } else {\r\n          $option.addClass(cssClass);\r\n          this._$dropdown.append($option);\r\n        }\r\n      });\r\n\r\n      this._$options = this._$dropdown.find(`.${this._options.block}__option`);\r\n\r\n      if (this._options.search) {\r\n        this._search();\r\n      }\r\n\r\n      this._$value.one('click', event => {\r\n        this._show(event);\r\n      });\r\n\r\n      this._$value.prop('disabled', !this._$options.length);\r\n\r\n      this._$options.on('click', event => {\r\n        this._select(event);\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Shows custom select dropdown & sets outside\r\n     * click listener to hide.\r\n     *\r\n     * @param {Object} event Value click jQuery event.\r\n     * @private\r\n     */\r\n    _show(event) {\r\n      event.preventDefault();\r\n\r\n      this._dropup();\r\n      $(window).on('resize scroll', this._dropup);\r\n\r\n      this._$element.addClass(this._activeModifier);\r\n\r\n      this._$dropdown.slideDown(this._options.transition, () => {\r\n        if (this._options.search) {\r\n          this._$input.focus();\r\n\r\n          if (this._options.includeValue) {\r\n            this._scroll();\r\n          }\r\n        }\r\n\r\n        // Open callback\r\n        if (typeof this._options.showCallback === 'function') {\r\n          this._options.showCallback.call(this._$element[0]);\r\n        }\r\n      });\r\n\r\n      setTimeout(() => {\r\n        $(document).on('touchstart click', this._outside);\r\n      }, 0);\r\n\r\n      this._$value.one('click', event => {\r\n        event.preventDefault();\r\n\r\n        this._hide();\r\n      });\r\n\r\n      if (this._options.keyboard) {\r\n        this._options.index = -1;\r\n        $(window).on('keydown', this._keydown);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Hides custom select dropdown & resets events\r\n     * listeners to initial.\r\n     *\r\n     * @private\r\n     */\r\n    _hide() {\r\n      if (this._options.search) {\r\n        this._$input.val('').blur();\r\n        this._$options.show();\r\n        this._$wrap.scrollTop(0);\r\n      }\r\n\r\n      this._$dropdown.slideUp(this._options.transition, () => {\r\n        this._$element\r\n          .removeClass(this._activeModifier)\r\n          .removeClass(this._dropupModifier);\r\n\r\n        // Close callback\r\n        if (typeof this._options.hideCallback === 'function') {\r\n          this._options.hideCallback.call(this._$element[0]);\r\n        }\r\n\r\n        this._$value\r\n          .off('click')\r\n          .one('click', event => {\r\n            this._show(event);\r\n          });\r\n        $(document).off('touchstart click', this._outside);\r\n        $(window).off('resize scroll', this._dropup);\r\n      });\r\n\r\n      if (this._options.keyboard) {\r\n        this._$options.blur();\r\n        $(window).off('keydown', this._keydown);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Centers chosen option in scrollable element\r\n     * of dropdown.\r\n     *\r\n     * @private\r\n     */\r\n    _scroll() {\r\n      $.each(this._$options, (i, option) => {\r\n        const $option = $(option);\r\n\r\n        if ($option.text() === this._$value.text()) {\r\n          const top = $option.position().top;\r\n          const height = this._$wrap.outerHeight();\r\n          const center = height / 2 - $option.outerHeight() / 2;\r\n\r\n          if (top > center) {\r\n            this._$wrap.scrollTop(top - center);\r\n          }\r\n\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Changes value of custom select & `<select>`\r\n     * by chosen option.\r\n     *\r\n     * @param {Object} event Option click jQuery event.\r\n     * @private\r\n     */\r\n    _select(event) {\r\n      event.preventDefault();\r\n\r\n      const choice = $(event.currentTarget).text().trim();\r\n      const values = [...this._values];\r\n\r\n      this._$value\r\n        .text(choice)\r\n        .removeClass(this._$value.data('class'));\r\n      this._$values.prop('selected', false);\r\n\r\n      $.each(values, (i, el) => {\r\n        if (!this._options.includeValue && el === choice) {\r\n          values.splice(i, 1);\r\n        }\r\n\r\n        $.each(this._$values, (i, option) => {\r\n          const $option = $(option);\r\n          if ($option.text().trim() === choice) {\r\n            const cssClass = $option.attr('class');\r\n\r\n            $option.prop('selected', true);\r\n            this._$value.addClass(cssClass).data('class', cssClass);\r\n          }\r\n        });\r\n      });\r\n\r\n      this._hide();\r\n\r\n      if (!this._options.includeValue) {\r\n        // Update dropdown options content\r\n        if (this._$options.length > values.length) {\r\n          const last = this._$options.eq(values.length);\r\n\r\n          last.remove();\r\n          this._$options = this._$options.not(last);\r\n\r\n          if (!this._$options.length) {\r\n            this._$value.prop('disabled', true);\r\n          }\r\n        }\r\n\r\n        $.each(this._$options, (i, option) => {\r\n          const $option = $(option);\r\n          $option.text(values[i]);\r\n\r\n          // Reset option class\r\n          $option.attr('class', `${this._options.block}__option`);\r\n\r\n          $.each(this._$values, function () {\r\n            const $this = $(this);\r\n            if ($this.text().trim() === values[i]) {\r\n              $option.addClass($this.attr('class'));\r\n              $option.prop('disabled', $this.prop('disabled'));\r\n            }\r\n          });\r\n        });\r\n      } else {\r\n        // Select chosen option\r\n        this._$options.removeClass(this._optionSelectedModifier);\r\n\r\n        $.each(this._$options, (i, option) => {\r\n          const $option = $(option);\r\n\r\n          if ($option.text().trim() === choice) {\r\n            $option.addClass(this._optionSelectedModifier);\r\n\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n\r\n      if (typeof event.originalEvent !== 'undefined') {\r\n        this._$select.trigger('change');\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Wraps options by wrap element, adds search\r\n     * input to dropdown.\r\n     *\r\n     * @private\r\n     */\r\n    _search() {\r\n      this._$input = $(`<input class=\"${this._options.block}__input\" autocomplete=\"off\">`);\r\n      this._$dropdown.prepend(this._$input);\r\n\r\n      // Add scrollable wrap\r\n      this._$options.wrapAll(`<div class=\"${this._options.block}__option-wrap\"></div>`);\r\n      this._$wrap = this._$element.find(`.${this._options.block}__option-wrap`);\r\n\r\n      this._$input.on('focus', () => {\r\n        this._options.index = -1;\r\n      });\r\n\r\n      this._$input.on('keyup', () => {\r\n        const query = this._$input.val().trim();\r\n\r\n        if (query.length) {\r\n          this._$wrap.scrollTop(0);\r\n\r\n          setTimeout(() => {\r\n            if (query === this._$input.val().trim()) {\r\n              $.each(this._$options, (i, option) => {\r\n                const $option = $(option);\r\n                const text = $option.text().trim().toLowerCase();\r\n                const match = text.indexOf(query.toLowerCase()) !== -1;\r\n\r\n                $option.toggle(match);\r\n              });\r\n            }\r\n          }, 300);\r\n        } else {\r\n          this._$options.show();\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Toggles custom select dropup modifier based\r\n     * on space for dropdown below.\r\n     *\r\n     * @private\r\n     */\r\n    _dropup() {\r\n      const bottom = this._$element[0].getBoundingClientRect().bottom;\r\n      const up = $(window).height() - bottom < this._$dropdown.height();\r\n\r\n      this._$element.toggleClass(this._dropupModifier, up);\r\n    }\r\n\r\n    /**\r\n     * Hides dropdown if target of event (e.g. click\r\n     * on `$window`) is not custom select.\r\n     *\r\n     * @param {Object} event Outside \"click\" jQuery event.\r\n     * @private\r\n     */\r\n    _outside(event) {\r\n      const $target = $(event.target);\r\n      if (!$target.parents().is(this._$element) && !$target.is(this._$element)) {\r\n        this._hide();\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Controls navigation from keyboard by custom\r\n     * select options.\r\n     *\r\n     * @param {Object} event Keydown jQuery event.\r\n     * @private\r\n     */\r\n    _keydown(event) {\r\n      const $visible = this._$options.filter(':visible').not('[disabled]');\r\n\r\n      switch (event.which) {\r\n        // Down\r\n        case 40:\r\n          event.preventDefault();\r\n\r\n          const next = $visible.eq(this._options.index + 1).length;\r\n          if (next) {\r\n            this._options.index += 1;\r\n          } else {\r\n            this._options.index = 0;\r\n          }\r\n\r\n          $visible.eq(this._options.index).focus();\r\n          break;\r\n\r\n        // Up\r\n        case 38:\r\n          event.preventDefault();\r\n\r\n          const prev = $visible.eq(this._options.index - 1).length;\r\n          if (prev && this._options.index - 1 >= 0) {\r\n            this._options.index -= 1;\r\n          } else {\r\n            this._options.index = $visible.length - 1;\r\n          }\r\n\r\n          $visible.eq(this._options.index).focus();\r\n          break;\r\n\r\n        // Enter\r\n        case 13:\r\n\r\n        // Space\r\n        case 32:\r\n          if (!this._$input || !this._$input.is(':focus')) {\r\n            event.preventDefault();\r\n\r\n            const $option = this._$options.add(this._$value).filter(':focus');\r\n            $option.trigger('click');\r\n\r\n            if (!$option.is(this._$value)) {\r\n              this._$select.trigger('change');\r\n            }\r\n            this._$value.focus();\r\n          }\r\n          break;\r\n\r\n        // Esc\r\n        case 27:\r\n          event.preventDefault();\r\n\r\n          this._hide();\r\n          this._$value.focus();\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Creates jQuery plugin function.\r\n     *\r\n     * @param {(Object|string)=} config Options or method.\r\n     * @returns {Function} jQuery plugin.\r\n     */\r\n    static _jQueryPlugin(config) {\r\n      return this.each(function () {\r\n        const $this = $(this);\r\n        let data = $this.data('custom-select');\r\n\r\n        if (!data) {\r\n          if (typeof config !== 'string') {\r\n            data = new CustomSelect(this, config);\r\n            $this.data('custom-select', data);\r\n          }\r\n        } else {\r\n          if (config === 'reset') {\r\n            data.reset();\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  $.fn['customSelect'] = CustomSelect._jQueryPlugin;\r\n  $.fn['customSelect'].noConflict = () => $.fn['customSelect'];\r\n\r\n  return CustomSelect;\r\n\r\n})($);\r\n\r\nexport default CustomSelect;\r\n"]}