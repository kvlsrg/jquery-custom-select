{"version":3,"sources":["../../jquery.custom-select.js"],"names":["CustomSelect","$","defaults","block","hideCallback","includeValue","keyboard","modifier","placeholder","search","showCallback","transition","autocomplete","select","options","this","_$select","_options","_keydown","bind","_dropup","_outside","console","warn","_init","_proto","prototype","_this","_$element","hide","after","_activeModifier","_dropupModifier","_$value","find","_$dropdown","addClass","html","_values","_$selectOptions","each","i","option","el","text","trim","push","length","prop","cssClass","eq","attr","$option","data","append","one","event","_show","_$options","on","_select","_search","_this2","preventDefault","window","slideDown","_$input","focus","call","outsideClickEvent","document","documentElement","setTimeout","_hide","index","_this3","slideUp","removeClass","off","blur","show","val","_$wrap","scrollTop","_this4","choice","currentTarget","values","slice","splice","remove","$this","originalEvent","trigger","_this5","prepend","wrapAll","query","match","toLowerCase","indexOf","toggle","bottom","getBoundingClientRect","up","height","toggleClass","$target","target","parents","is","visibleOptions","filter","keyCode","_jQueryPlugin","extend","fn","noConflict"],"mappings":"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","sourcesContent":["import $ from 'jquery';\r\n\r\n/*!\r\n * Custom Select jQuery Plugin\r\n */\r\n\r\nconst CustomSelect = (($) => {\r\n\r\n  const defaults = {\r\n    block: 'custom-select',\r\n    hideCallback: false,\r\n    includeValue: false,\r\n    keyboard: true,\r\n    modifier: false,\r\n    placeholder: false,\r\n    search: false,\r\n    showCallback: false,\r\n    transition: 100,\r\n\r\n    // Deprecated options\r\n    // TODO: Remove in v1.3.1\r\n    autocomplete: false\r\n  };\r\n\r\n  class CustomSelect {\r\n\r\n    /**\r\n     * Custom Select\r\n     *\r\n     * @param {Object} select - `<select>` DOM element\r\n     * @param {Object} [options] - Settings object\r\n     * @param {string} [options.block=custom-select] - Class name (BEM block name)\r\n     * @param {Function} [options.hideCallback=false] - Fires after dropdown closes\r\n     * @param {boolean} [options.includeValue=false] - Shows chosen value option in\r\n     * dropdown, if enabled also cancels dropdown options rerender\r\n     * @param {boolean} [options.keyboard=true] - Enables keyboard control\r\n     * @param {string} [options.modifier=false] - Additional class, e.g. BEM modifier\r\n     * @param {string} [options.placeholder=false] - Custom select placeholder hint,\r\n     * can be an HTML string (appears if there is no explicitly selected options)\r\n     * @param {boolean} [options.search=false] - Adds input to search options\r\n     * @param {Function} [options.showCallback=false] - Fires after dropdown opens\r\n     * @param {number || string} [options.transition=100] - jQuery slideUp/Down speed\r\n     */\r\n    constructor(select, options) {\r\n      this._$select = $(select);\r\n      this._options = options;\r\n\r\n      // Event handlers that can be removed\r\n      this._keydown = this._keydown.bind(this);\r\n      this._dropup = this._dropup.bind(this);\r\n      this._outside = this._outside.bind(this);\r\n\r\n      // TODO: Remove in v1.3.1\r\n      if (this._options.autocomplete) {\r\n        this._options.search = true;\r\n        console.warn('Option `autocomplete` is deprecated since v1.3.0! Please, use `search` instead.');\r\n      }\r\n\r\n      this._init();\r\n    }\r\n\r\n    _init() {\r\n      this._$element = $(\r\n        `<div class=\"${this._options.block}\">\r\n           <button class=\"${this._options.block}__option ${this._options.block}__option--value\"></button>\r\n           <div class=\"${this._options.block}__dropdown\"></div>\r\n         </div>`\r\n      );\r\n\r\n      this._$select\r\n        .hide()\r\n        .after(this._$element);\r\n\r\n      // Modifiers\r\n      this._activeModifier = `${this._options.block}--active`;\r\n      this._dropupModifier = `${this._options.block}--dropup`;\r\n\r\n      this._$value = this._$element.find(`.${this._options.block}__option--value`);\r\n      this._$dropdown = this._$element.find(`.${this._options.block}__dropdown`);\r\n\r\n      if (this._options.modifier) {\r\n        this._$element.addClass(this._options.modifier);\r\n      }\r\n\r\n      this._$dropdown.html('').hide();\r\n\r\n      // Create values array\r\n      this._values = [];\r\n      this._$selectOptions = this._$select.find('option');\r\n\r\n      $.each(this._$selectOptions, (i, option) => {\r\n        let el = $(option).text().trim();\r\n        this._values.push(el);\r\n      });\r\n\r\n      if (this._options.placeholder) {\r\n        // Disable placeholder if there is explicitly selected option\r\n        if (this._$select.find('[selected]').length) {\r\n          this._options.placeholder = false;\r\n        } else {\r\n          this._$value.html(this._options.placeholder);\r\n          // Set select value to null\r\n          this._$select.prop('selectedIndex', -1);\r\n        }\r\n      }\r\n\r\n      // Render custom select options\r\n      $.each(this._values, (i, el) => {\r\n        let cssClass = this._$selectOptions.eq(i).attr('class');\r\n        let $option = $(`<button class=\"${this._options.block}__option\">${el}</button>`);\r\n\r\n        if (el === this._$select.find(':selected').text().trim()) {\r\n          this._$value\r\n            .text(el)\r\n            .addClass(cssClass).data('class', cssClass);\r\n\r\n          if (this._options.includeValue || this._options.placeholder) {\r\n            this._$dropdown.append($option);\r\n          }\r\n        } else {\r\n          $option.addClass(cssClass);\r\n          this._$dropdown.append($option);\r\n        }\r\n      });\r\n\r\n      this._$value.one('click', (event) => {\r\n        this._show(event);\r\n      });\r\n      this._$options = this._$dropdown.find(`.${this._options.block}__option`);\r\n      this._$options.on('click', (event) => {\r\n        this._select(event);\r\n      });\r\n\r\n      if (this._options.search) {\r\n        this._search();\r\n      }\r\n    }\r\n\r\n    _show(event) {\r\n      event.preventDefault();\r\n\r\n      // Set dropdown position modifier\r\n      this._dropup();\r\n      $(window).on('resize scroll', this._dropup);\r\n\r\n      this._$element.addClass(this._activeModifier);\r\n\r\n      this._$dropdown.slideDown(this._options.transition, () => {\r\n        if (this._options.search) {\r\n          this._$input.focus();\r\n        }\r\n\r\n        // Open callback\r\n        if (typeof this._options.showCallback === 'function') {\r\n          this._options.showCallback.call(this._$element[0]);\r\n        }\r\n      });\r\n\r\n      let outsideClickEvent = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\r\n      setTimeout(() => {\r\n        $(window).on(outsideClickEvent, this._outside);\r\n      }, 0);\r\n\r\n      this._$value.one('click', (event) => {\r\n        event.preventDefault();\r\n\r\n        this._hide();\r\n      });\r\n\r\n      if (this._options.keyboard) {\r\n        this._options.index = -1;\r\n        $(window).on('keydown', this._keydown);\r\n      }\r\n    }\r\n\r\n    _hide() {\r\n      this._$dropdown.slideUp(this._options.transition, () => {\r\n        this._$element\r\n          .removeClass(this._activeModifier)\r\n          .removeClass(this._dropupModifier);\r\n\r\n        // Close callback\r\n        if (typeof this._options.hideCallback === 'function') {\r\n          this._options.hideCallback.call(this._$element[0]);\r\n        }\r\n\r\n        $(window)\r\n          .off('touchstart click', this._outside)\r\n          .off('resize scroll', this._dropup);\r\n        this._$value\r\n          .off('click')\r\n          .one('click', (event) => {\r\n            this._show(event);\r\n          });\r\n      });\r\n\r\n      if (this._options.keyboard) {\r\n        this._$options.blur();\r\n        $(window).off('keydown', this._keydown);\r\n      }\r\n\r\n      // Clear search\r\n      if (this._options.search) {\r\n        this._$options.show();\r\n        this._$input\r\n          .val('')\r\n          .blur();\r\n        this._$wrap.scrollTop(0);\r\n      }\r\n    }\r\n\r\n    _select(event) {\r\n      event.preventDefault();\r\n\r\n      const choice = $(event.currentTarget).text().trim();\r\n      const values = this._values.slice();\r\n\r\n      this._$value\r\n        .text(choice)\r\n        .removeClass(this._$value.data('class'));\r\n      this._$selectOptions.prop('selected', false);\r\n\r\n      $.each(values, (i, el) => {\r\n        if (!this._options.includeValue && el === choice) {\r\n          values.splice(i, 1);\r\n        }\r\n\r\n        $.each(this._$selectOptions, (i, option) => {\r\n          let $option = $(option);\r\n          if ($option.text().trim() === choice) {\r\n            let cssClass = $option.attr('class');\r\n\r\n            $option.prop('selected', true);\r\n            this._$value.addClass(cssClass).data('class', cssClass);\r\n          }\r\n        });\r\n      });\r\n\r\n      this._hide();\r\n\r\n      // Update dropdown options content\r\n      if (!this._options.includeValue) {\r\n        if (this._$options.length > values.length) {\r\n          this._$options.eq(values.length).remove();\r\n        }\r\n\r\n        $.each(this._$options, (i, option) => {\r\n          let $option = $(option);\r\n          $option.text(values[i]);\r\n\r\n          // Reset option class\r\n          $option.attr('class', `${this._options.block}__option`);\r\n\r\n          $.each(this._$selectOptions, function() {\r\n            let $this = $(this);\r\n            if ($this.text().trim() === values[i]) {\r\n              $option.addClass($this.attr('class'));\r\n            }\r\n          });\r\n        });\r\n      }\r\n\r\n      if (typeof event.originalEvent !== 'undefined') {\r\n        this._$select.trigger('change');\r\n      }\r\n    }\r\n\r\n    _search() {\r\n      // Add search input\r\n      this._$input = $(`<input class=\"${this._options.block}__input\" autocomplete=\"off\">`);\r\n      this._$dropdown.prepend(this._$input);\r\n\r\n      // Add scrollable wrap\r\n      this._$options.wrapAll(`<div class=\"${this._options.block}__option-wrap\"></div>`);\r\n      this._$wrap = this._$element.find(`.${this._options.block}__option-wrap`);\r\n\r\n      this._$input.on('focus', () => {\r\n        this._options.index = -1;\r\n        this._$wrap.scrollTop(0);\r\n      });\r\n\r\n      this._$input.on('keyup', () => {\r\n        let query = this._$input.val().trim();\r\n        if (query.length) {\r\n          setTimeout(() => {\r\n            if (query === this._$input.val().trim()) {\r\n              $.each(this._$options, (i, option) => {\r\n                let $option = $(option);\r\n                let text = $option.text().trim().toLowerCase();\r\n                let match = text.indexOf(query.toLowerCase()) !== -1;\r\n\r\n                $option.toggle(match);\r\n              });\r\n            }\r\n          }, 300);\r\n        } else {\r\n          this._$options.show();\r\n        }\r\n      });\r\n    }\r\n\r\n    _dropup() {\r\n      let bottom = this._$element[0].getBoundingClientRect().bottom;\r\n      let up = $(window).height() - bottom < this._$dropdown.height();\r\n\r\n      this._$element.toggleClass(this._dropupModifier, up);\r\n    }\r\n\r\n    _outside(event) {\r\n      let $target = $(event.target);\r\n      if (!$target.parents().is(this._$element) && !$target.is(this._$element)) {\r\n        this._hide();\r\n      }\r\n    }\r\n\r\n    _keydown(event) {\r\n      let visibleOptions = this._$options.filter(':visible');\r\n\r\n      switch (event.keyCode) {\r\n        // Down\r\n        case 40:\r\n          event.preventDefault();\r\n\r\n          let next = this._$dropdown.find(visibleOptions).eq(this._options.index + 1).length;\r\n          if (next !== 0) {\r\n            this._options.index += 1;\r\n          } else {\r\n            this._options.index = 0;\r\n          }\r\n\r\n          this._$dropdown.find(visibleOptions).eq(this._options.index).focus();\r\n          break;\r\n\r\n        // Up\r\n        case 38:\r\n          event.preventDefault();\r\n\r\n          let prev = this._$dropdown.find(visibleOptions).eq(this._options.index - 1).length;\r\n          if (prev !== 0 && this._options.index - 1 >= 0) {\r\n            this._options.index -= 1;\r\n          } else {\r\n            this._options.index = this._$dropdown.find(visibleOptions).length - 1;\r\n          }\r\n\r\n          this._$dropdown.find(visibleOptions).eq(this._options.index).focus();\r\n          break;\r\n\r\n        // Enter\r\n        case 13:\r\n\r\n        // Space\r\n        case 32:\r\n          if (!this._$input || !this._$input.is(':focus')) {\r\n            event.preventDefault();\r\n\r\n            let $option = $(`.${this._options.block}__option:focus`);\r\n            $option.trigger('click');\r\n\r\n            if (!$option.is(this._$value)) {\r\n              this._$select.trigger('change');\r\n            }\r\n            this._$value.focus();\r\n          }\r\n          break;\r\n\r\n        // Esc\r\n        case 27:\r\n          event.preventDefault();\r\n\r\n          this._hide();\r\n          this._$value.focus();\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    static _jQueryPlugin(options) {\r\n      return this.each(function () {\r\n        let _options = $.extend({}, defaults);\r\n        let $this = $(this);\r\n        let data = $this.data('custom-select');\r\n\r\n        if (typeof options === 'object') {\r\n          $.extend(_options, options);\r\n        }\r\n\r\n        if (!data) {\r\n          data = new CustomSelect(this, _options);\r\n          $(this).data('custom-select', data);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  $.fn['customSelect'] = CustomSelect._jQueryPlugin;\r\n  $.fn['customSelect'].noConflict = () => $.fn['customSelect'];\r\n\r\n})($);\r\n\r\nexport default CustomSelect;\r\n"]}